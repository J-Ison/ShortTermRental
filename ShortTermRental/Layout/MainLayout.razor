@inherits LayoutComponentBase
@using MudBlazor
@using Microsoft.AspNetCore.Components.Routing

<MudThemeProvider />
<MudPopoverProvider />
<MudDialogProvider />
<MudSnackbarProvider />

<MudLayout>

    <!-- Top App Bar -->
	<MudAppBar Elevation="4" Class="nn-appbar nn-appbar-sky">
        <MudIconButton Icon="@Icons.Material.Filled.Menu"
                       Color="Color.Inherit"
                       Edge="Edge.Start"
                       OnClick="@ToggleDrawer"
                       Class="nn-menu-btn" />

        <div class="nn-brand">
			<img src="Images/apple5_blue.png"
				 alt="Apple5 Logo"
				 class="nn-logo-img" />

            <div class="nn-brand-text">
                <div class="nn-brand-title">Nestled Nooks</div>
                <div class="nn-brand-subtitle">Relax • Recharge • Reset</div>
            </div>
        </div>

        <MudSpacer />

        <!-- Desktop links -->
        <MudHidden Breakpoint="Breakpoint.MdAndDown">
            <MudButton Variant="Variant.Text"
                       Color="Color.Inherit"
                       Href="/"
                       Class="nn-nav-link">
                Home
            </MudButton>
            <MudButton Variant="Variant.Text"
                       Color="Color.Inherit"
                       Href="/contact"
                       Class="nn-nav-link">
                Contact
            </MudButton>
            <MudButton Variant="Variant.Text"
                       Color="Color.Inherit"
                       Href="/login"
                       Class="nn-nav-cta">
                Login / Register
            </MudButton>
        </MudHidden>
    </MudAppBar>

    <!-- Sidebar Drawer -->
	<MudDrawer @bind-Open="_drawerOpen"
			   Elevation="4"
			   Class="nn-drawer-white"
			   Anchor="Anchor.Left">
        <MudNavMenu>

            <MudText Class="nn-drawer-title px-4 pb-2 pt-3">
                Menu
            </MudText>

            <MudNavLink Href="/" Match="NavLinkMatch.All" Icon="@Icons.Material.Filled.Home">
                Home
            </MudNavLink>

            @* Uncomment later when you add these *@
            @*
            <MudNavLink Href="/booking" Icon="@Icons.Material.Filled.Event">
                Booking
            </MudNavLink>
            <MudNavLink Href="/properties" Icon="@Icons.Material.Filled.House">
                Properties
            </MudNavLink>
            *@

            <MudNavLink Href="/contact" Icon="@Icons.Material.Filled.Email">
                Contact
            </MudNavLink>

            <MudNavLink Href="/login" Icon="@Icons.Material.Filled.Lock">
                Login / Register
            </MudNavLink>

        </MudNavMenu>
    </MudDrawer>

    <!-- Main content -->
    <MudMainContent>
        <div class="px-4">
            <article class="content">
                @Body
            </article>
        </div>
    </MudMainContent>

    <!-- Footer -->
    <MudFooter Class="text-end text-muted small px-3 py-2">
        Nestled Nooks • v @AppVersion
    </MudFooter>

</MudLayout>

@code {
    private bool _drawerOpen;

    private void ToggleDrawer() => _drawerOpen = !_drawerOpen;

    private string AppVersion =>
        typeof(Program).Assembly.GetName().Version?.ToString() ?? "0.0.0";
}
